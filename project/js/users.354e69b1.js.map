{"version":3,"file":"js/users.354e69b1.js","mappings":"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","sources":["webpack://vue-project/./src/components/user/Users.vue?5914","webpack://vue-project/src/components/user/Users.vue","webpack://vue-project/./src/components/user/Users.vue?4b7b","webpack://vue-project/./src/components/user/Users.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"users\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_c('el-breadcrumb-item',[_vm._v(\"用户列表\")])],1),_c('el-card',[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"clear\":_vm.getUserList},model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUserList},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDialogVisible = true}}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.userList,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"label\":\"姓名\",\"prop\":\"username\"}}),_c('el-table-column',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}}),_c('el-table-column',{attrs:{\"label\":\"电话\",\"prop\":\"mobile\"}}),_c('el-table-column',{attrs:{\"label\":\"角色\",\"prop\":\"role_name\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{on:{\"change\":function($event){return _vm.userStateChanged(scope.row)}},model:{value:(scope.row.mg_state),callback:function ($$v) {_vm.$set(scope.row, \"mg_state\", $$v)},expression:\"scope.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"修改角色\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}})],1),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"删除角色\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.removeUser(scope.row.id)}}})],1),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"分配角色\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showSetRoleDialog(scope.row)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[2, 5, 10, 20],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.addDialogVisible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"close\":_vm.closeAddDialogVisible}},[_c('el-form',{ref:\"addRef\",attrs:{\"model\":_vm.addUserForm,\"rules\":_vm.addRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addUserForm.username),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"username\", $$v)},expression:\"addUserForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.addUserForm.password),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"password\", $$v)},expression:\"addUserForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addUserForm.email),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"email\", $$v)},expression:\"addUserForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addUserForm.mobile),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"mobile\", $$v)},expression:\"addUserForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.closeAddDialogVisible}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改用户\",\"visible\":_vm.editDialogVisible,\"close-on-click-modal\":false,\"destroy-on-close\":\"\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":_vm.closeEditDialog}},[_c('el-form',{ref:\"editRef\",attrs:{\"model\":_vm.editUserForm,\"rules\":_vm.editRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editUserForm.username),callback:function ($$v) {_vm.$set(_vm.editUserForm, \"username\", $$v)},expression:\"editUserForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editUserForm.email),callback:function ($$v) {_vm.$set(_vm.editUserForm, \"email\", $$v)},expression:\"editUserForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editUserForm.mobile),callback:function ($$v) {_vm.$set(_vm.editUserForm, \"mobile\", $$v)},expression:\"editUserForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.closeEditDialog}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配角色\",\"visible\":_vm.setRoleDialogVisible},on:{\"update:visible\":function($event){_vm.setRoleDialogVisible=$event},\"close\":_vm.closeSetRoleDialog}},[_c('div',[_c('p',[_vm._v(\"当前的用户：\"+_vm._s(_vm.userInfo.username))]),_c('p',[_vm._v(\"当前的角色：\"+_vm._s(_vm.userInfo.role_name))]),_c('p',[_vm._v(\"分配新角色： \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.selectedRoleId),callback:function ($$v) {_vm.selectedRoleId=$$v},expression:\"selectedRoleId\"}},_vm._l((_vm.rolesList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.roleName,\"value\":item.id}})}),1)],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.setRole}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"users\">\r\n    <!-- 面包屑导航区域 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <!-- 卡片区域 -->\r\n    <el-card>\r\n      <!-- 搜索与添加区域 -->\r\n      <el-row :gutter=\"10\">\r\n        <el-col :span=\"8\">\r\n          <el-input placeholder=\"请输入内容\" v-model=\"queryInfo.query\" clearable @clear=\"getUserList\">\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getUserList\"></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"addDialogVisible = true\">添加用户</el-button>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <!-- 用户列表区域 -->\r\n      <el-table :data=\"userList\" border>\r\n        <el-table-column type=\"index\"></el-table-column>\r\n        <el-table-column label=\"姓名\" prop=\"username\"></el-table-column>\r\n        <el-table-column label=\"邮箱\" prop=\"email\"></el-table-column>\r\n        <el-table-column label=\"电话\" prop=\"mobile\"></el-table-column>\r\n        <el-table-column label=\"角色\" prop=\"role_name\"></el-table-column>\r\n        <el-table-column label=\"状态\">\r\n          <template slot-scope=\"scope\">\r\n            <el-switch v-model=\"scope.row.mg_state\" @change=\"userStateChanged(scope.row)\"></el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <!-- 修改按钮 -->\r\n            <el-tooltip effect=\"dark\" content=\"修改角色\" placement=\"top\" :enterable=\"false\">\r\n              <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"showEditDialog(scope.row.id)\"></el-button>\r\n            </el-tooltip>\r\n            <!-- 删除按钮 -->\r\n            <el-tooltip effect=\"dark\" content=\"删除角色\" placement=\"top\" :enterable=\"false\">\r\n              <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"removeUser(scope.row.id)\"></el-button>\r\n            </el-tooltip>\r\n            <!-- 分配角色按钮 -->\r\n            <el-tooltip effect=\"dark\" content=\"分配角色\" placement=\"top\" :enterable=\"false\">\r\n              <el-button type=\"warning\" icon=\"el-icon-setting\" size=\"mini\" @click=\"showSetRoleDialog(scope.row)\"></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页区域 -->\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"queryInfo.pagenum\" :page-sizes=\"[2, 5, 10, 20]\" :page-size=\"queryInfo.pagesize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n      </el-pagination>\r\n    </el-card>\r\n\r\n    <!------------------------------------------------分割线------------------------------------------------>\r\n\r\n    <!-- 添加用户的对话框 -->\r\n    <el-dialog title=\"添加用户\" :visible.sync=\"addDialogVisible\" @close=\"closeAddDialogVisible\" :close-on-click-modal=\"false\">\r\n      <!-- 内容主体区域 -->\r\n      <el-form :model=\"addUserForm\" :rules=\"addRules\" ref=\"addRef\" label-width=\"70px\">\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"addUserForm.username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"addUserForm.password\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"addUserForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"addUserForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <!-- 底部区域 -->\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"closeAddDialogVisible\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addUser\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 修改用户的对话框 -->\r\n    <el-dialog title=\"修改用户\" :visible.sync=\"editDialogVisible\" @close=\"closeEditDialog\" :close-on-click-modal=\"false\" destroy-on-close>\r\n      <el-form :model=\"editUserForm\" :rules=\"editRules\" ref=\"editRef\" label-width=\"70px\">\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"editUserForm.username\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"editUserForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"editUserForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"closeEditDialog\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editUser\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 分配角色的对话框 -->\r\n    <el-dialog title=\"分配角色\" :visible.sync=\"setRoleDialogVisible\" @close=\"closeSetRoleDialog\">\r\n      <div>\r\n        <p>当前的用户：{{userInfo.username}}</p>\r\n        <p>当前的角色：{{userInfo.role_name}}</p>\r\n        <p>分配新角色：\r\n          <el-select v-model=\"selectedRoleId\" placeholder=\"请选择\">\r\n            <el-option v-for=\"item in rolesList\" :key=\"item.id\" :label=\"item.roleName\" :value=\"item.id\">\r\n            </el-option>\r\n          </el-select>\r\n        </p>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"setRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"setRole\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  // 验证邮箱规则\r\n  var checkEmail = (rule, value, cb) => {\r\n    const regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/\r\n    if (regEmail.test(value)) {\r\n      return cb()\r\n    }\r\n    cb(new Error('请输入合法的邮箱'))\r\n  }\r\n\r\n  // 验证手机号的规则\r\n  var checkMobile = (rule, value, cb) => {\r\n    const regMobile = /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/\r\n    if (regMobile.test(value)) {\r\n      return cb()\r\n    }\r\n    cb(new Error('请输入合法的手机号'))\r\n  }\r\n\r\nexport default {\r\n  /* eslint-disable */\r\n  name: 'Users',\r\n  data () {\r\n    return {\r\n      search: '',\r\n      // 用户列表数据\r\n      userList: [],\r\n      // 用户列表请求参数\r\n      queryInfo: {\r\n        // 查询参数\r\n        query: '',\r\n        // 当前页码\r\n        pagenum: 1,\r\n        // 每页显示条数\r\n        pagesize: 2\r\n      },\r\n      // 用户总量\r\n      total: 0,\r\n      // 添加用户参数\r\n      addUserForm: {},\r\n      // 添加用户对话框-打开/关闭\r\n      addDialogVisible: false,\r\n      // 添加用户的数据校验\r\n      addRules: {\r\n        username: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' },\r\n          {\r\n            min: 3,\r\n            max: 10,\r\n            message: '用户名的长度在3~10个字符之间',\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n          {\r\n            min: 6,\r\n            max: 15,\r\n            message: '密码的长度在6~15个字符之间',\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        email: [\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n          { validator: checkEmail, trigger: 'blur' }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: '请输入手机号', trigger: 'blur' },\r\n          { validator: checkMobile, trigger: 'blur' }\r\n        ]\r\n      },\r\n\r\n      // 修改用户参数\r\n      editUserForm: {},\r\n      // 修改用户对话框-打开/关闭\r\n      editDialogVisible: false,\r\n      // 修改用户的数据校验\r\n      editRules: {\r\n        email: [\r\n          { required: true, message: '请输入用户邮箱', trigger: 'blur' },\r\n          { validator: checkEmail, trigger: 'blur' }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: '请输入用户手机', trigger: 'blur' },\r\n          { validator: checkMobile, trigger: 'blur' }\r\n        ]\r\n      },\r\n\r\n      // 控制分配角色对话框的显示与隐藏\r\n      setRoleDialogVisible: false,\r\n      // 需要被分配角色的用户信息\r\n      userInfo: {},\r\n      // 所有角色的数据列表\r\n      rolesList: [],\r\n      // 已选中的角色Id值\r\n      selectedRoleId: ''\r\n    }\r\n  },\r\n  created () {\r\n    // 获取用户数据列表\r\n    this.getUserList()\r\n  },\r\n  methods: {\r\n    // 获取用户数据列表 \r\n    async getUserList () {\r\n      const { data: res } = await this.axios.get('users', {\r\n        params: this.queryInfo\r\n      })\r\n      if (res.meta.status !== 200) return this.$message.error('获取用户列表失败！')\r\n      console.log(res)\r\n      this.userList = res.data.users\r\n      this.total = res.data.total\r\n    },\r\n    // 监听 pagesize 改变的事件\r\n    handleSizeChange (newSize) {\r\n      this.queryInfo.pagesize = newSize\r\n      this.getUserList()\r\n    },\r\n    // 监听 页码值 改变的事件\r\n    handleCurrentChange (newPage) {\r\n      this.queryInfo.pagenum = newPage\r\n      this.getUserList()\r\n    },\r\n    // 监听 switch 开关状态\r\n    async userStateChanged (userinfo) {\r\n      console.log(userinfo)\r\n      const { data: res } = await this.axios.put(`users/${userinfo.id}/state/${userinfo.mg_state}`)\r\n      if (res.meta.status !== 200) {\r\n        userinfo.mg_state = !userinfo.mg_state\r\n        return this.$message.error('更新用户状态失败！')\r\n      }\r\n      this.$message.success('更新用户状态成功！')\r\n    },\r\n    // 关闭添加用户对话框\r\n    closeAddDialogVisible () {\r\n      this.$refs.addRef.resetFields()\r\n      this.addDialogVisible = false\r\n    },\r\n    // 添加用户提交\r\n    addUser () {\r\n      this.$refs.addRef.validate(async valid => {\r\n        if (!valid) return\r\n        const { data: res } = await this.axios.post('users', this.addUserForm)\r\n        if (res.meta.status !== 201) return this.$message.error('添加用户失败！')\r\n        this.$message.success('添加用户成功！')\r\n        // 隐藏添加用户的对话框\r\n        this.addDialogVisible = false\r\n        // 重新获取用户列表数据\r\n        this.getUserList()\r\n      })\r\n    },\r\n    // 打开编辑用户的对话框并显示数据\r\n    async showEditDialog(id) {\r\n      const { data: res } = await this.axios.get('users/' + id)\r\n      if (res.meta.status !== 200) return this.$message.error('查询用户信息失败！')\r\n      console.log(res);\r\n      this.editUserForm = res.data\r\n      this.editDialogVisible = true\r\n    },\r\n    // 关闭修改用户对话框\r\n    closeEditDialog () {\r\n      this.editUserForm = {}\r\n      this.editDialogVisible = false\r\n    },\r\n    // 编辑用户提交\r\n    editUser () {\r\n      this.$refs.editRef.validate(async valid => {\r\n        if (!valid) return\r\n        const { data: res } = await this.axios.put('users/' + this.editUserForm.id, {\r\n            email: this.editUserForm.email,\r\n            mobile: this.editUserForm.mobile\r\n          }\r\n        )\r\n        if (res.meta.status !== 200) return this.$message.error('更新用户信息失败！')\r\n        this.editDialogVisible = false\r\n        this.getUserList()\r\n        this.$message.success('更新用户信息成功！')\r\n      })\r\n    },\r\n    // 删除用户\r\n    async removeUser (id) {\r\n      const result = await this.$confirm( '此操作将永久删除该用户, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err)\r\n      // 取消\r\n      if (result !== 'confirm') {\r\n        return this.$message.info('已取消删除')\r\n      }\r\n      // 确认发起删除请求\r\n      const { data: res } = await this.axios.delete('users/' + id)\r\n      if (res.meta.status !== 200) return this.$message.error('删除用户失败！')\r\n      this.$message.success('删除用户成功！')\r\n      this.getUserList()\r\n    },\r\n    // 打开分配角色对话框并显示数据\r\n    async showSetRoleDialog (userInfo) {\r\n      this.userInfo = userInfo\r\n      // 请求获取所有角色列表\r\n      const { data: res } = await this.$http.get('roles')\r\n      if (res.meta.status !== 200) return this.$message.error('获取角色列表失败！')\r\n      console.log(res)\r\n      this.rolesList = res.data\r\n      this.setRoleDialogVisible = true\r\n    },\r\n    // 关闭分配角色对话框\r\n    closeSetRoleDialog () {\r\n      this.selectedRoleId = ''\r\n      this.userInfo = {}\r\n    },\r\n    // 分配角色\r\n    async setRole() {\r\n      if (!this.selectedRoleId) return this.$message.error('请选择要分配的角色！')\r\n\r\n      const { data: res } = await this.$http.put( `users/${this.userInfo.id}/role`, {\r\n        rid: this.selectedRoleId\r\n      })\r\n      if (res.meta.status !== 200) return this.$message.error('更新角色失败！')\r\n      this.getUserList()\r\n      this.setRoleDialogVisible = false\r\n      this.$message.success('更新角色成功！')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=2f81e94e&scoped=true&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f81e94e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","path","_v","on","getUserList","model","value","queryInfo","callback","$$v","$set","expression","slot","$event","addDialogVisible","userList","scopedSlots","_u","key","fn","scope","userStateChanged","row","showEditDialog","id","removeUser","showSetRoleDialog","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","closeAddDialogVisible","ref","addUserForm","addRules","addUser","editDialogVisible","closeEditDialog","editUserForm","editRules","editUser","setRoleDialogVisible","closeSetRoleDialog","_s","userInfo","username","role_name","selectedRoleId","_l","item","roleName","setRole","staticRenderFns","cb","name","data","search","query","required","message","trigger","min","max","password","email","validator","mobile","rolesList","created","methods","params","res","newSize","newPage","userinfo","$refs","addRef","resetFields","validate","valid","editRef","confirmButtonText","cancelButtonText","type","catch","result","rid","component"],"sourceRoot":""}